{"ast":null,"code":"var _jsxFileName = \"C:\\\\University\\\\CSCI2720\\\\project\\\\CSCI2720\\\\client\\\\src\\\\pages\\\\FavouritesPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from \"react\";\nimport \"../styles/locations.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FavouritesPage = () => {\n  _s();\n  const [favoriteLocations, setFavoriteLocations] = useState([]);\n  const [allLocations, setAllLocations] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [user, setUser] = useState(null);\n  const [favoriteCounts, setFavoriteCounts] = useState({});\n\n  // Ëé∑ÂèñÂΩìÂâçÁî®Êà∑‰ø°ÊÅØÔºàÈÄöËøáAPIÊ£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅÔºâ\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const res = await fetch(\"http://localhost:3000/login/me\", {\n          credentials: 'include'\n        });\n        if (res.ok) {\n          const userData = await res.json();\n          setUser(userData);\n        } else {\n          setUser(null);\n          setLoading(false);\n        }\n      } catch (err) {\n        console.error(\"Error checking auth:\", err);\n        setUser(null);\n        setLoading(false);\n      }\n    };\n    checkAuth();\n  }, []);\n\n  // Ëé∑ÂèñÊâÄÊúâÂú∞ÁÇπÊï∞ÊçÆ\n  useEffect(() => {\n    const fetchAllLocations = async () => {\n      try {\n        const res = await fetch(\"http://localhost:3000/locations\", {\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          credentials: 'include'\n        });\n        if (!res.ok) {\n          throw new Error(`Server error: ${res.status}`);\n        }\n        const data = await res.json();\n\n        // Ëé∑ÂèñÊØè‰∏™Âú∞ÁÇπÁöÑÊî∂ËóèÊï∞Èáè\n        const countsPromises = data.map(async loc => {\n          try {\n            const countRes = await fetch(`http://localhost:3000/favorite/loc-num/${loc.id}`);\n            if (countRes.ok) {\n              const countData = await countRes.json();\n              return {\n                id: loc.id,\n                count: countData.favoriteCount\n              };\n            }\n            return {\n              id: loc.id,\n              count: 0\n            };\n          } catch (err) {\n            console.error(`Error fetching favorite count for ${loc.id}:`, err);\n            return {\n              id: loc.id,\n              count: 0\n            };\n          }\n        });\n        const countsResults = await Promise.all(countsPromises);\n        const countsMap = {};\n        countsResults.forEach(result => {\n          countsMap[result.id] = result.count;\n        });\n        setFavoriteCounts(countsMap);\n\n        // Ê∑ªÂä†‰∫ã‰ª∂Êï∞ÈáèÔºàÂÆûÈôÖÂ∫îÁî®‰∏≠Â∫îËØ•‰ªéÂêéÁ´ØËé∑ÂèñÔºâ\n        const enriched = data.map(loc => ({\n          id: loc.id,\n          name: loc.name,\n          events: Math.floor(Math.random() * 10) + 1,\n          area: loc.area || \"Unknown\"\n        }));\n        setAllLocations(enriched);\n      } catch (err) {\n        console.error(\"Error fetching /locations:\", err);\n      }\n    };\n    fetchAllLocations();\n  }, []);\n\n  // Ëé∑ÂèñÁî®Êà∑ÁöÑÊî∂ËóèÂàóË°®\n  useEffect(() => {\n    const fetchFavorites = async () => {\n      if (!user) {\n        setLoading(false);\n        return;\n      }\n      try {\n        const res = await fetch(\"http://localhost:3000/favorite/my-all\", {\n          credentials: 'include'\n        });\n        if (!res.ok) {\n          if (res.status === 401 || res.status === 403) {\n            console.warn(\"User not authenticated for favorites\");\n            setFavoriteLocations([]);\n            setLoading(false);\n            return;\n          }\n          throw new Error(`Server error: ${res.status}`);\n        }\n        const data = await res.json();\n\n        // ÊèêÂèñÊî∂ËóèÁöÑÂú∞ÁÇπ‰ø°ÊÅØ\n        const favorites = data.filter(item => item.location) // Âè™‰øùÁïôÊúâÂú∞ÁÇπ‰ø°ÊÅØÁöÑ\n        .map(item => {\n          var _item$location, _item$location2;\n          const locationInfo = allLocations.find(loc => loc.id === item.locationId);\n          return {\n            favoriteId: item.favoriteId || item._id,\n            locationId: item.locationId,\n            name: ((_item$location = item.location) === null || _item$location === void 0 ? void 0 : _item$location.name) || (locationInfo === null || locationInfo === void 0 ? void 0 : locationInfo.name) || \"Unknown\",\n            events: (locationInfo === null || locationInfo === void 0 ? void 0 : locationInfo.events) || Math.floor(Math.random() * 10) + 1,\n            area: ((_item$location2 = item.location) === null || _item$location2 === void 0 ? void 0 : _item$location2.area) || (locationInfo === null || locationInfo === void 0 ? void 0 : locationInfo.area) || \"Unknown\",\n            favoriteCount: favoriteCounts[item.locationId] || 0,\n            timestamp: item.timestamp\n          };\n        });\n        setFavoriteLocations(favorites);\n        setLoading(false);\n      } catch (err) {\n        console.error(\"Error fetching favorites:\", err);\n        setFavoriteLocations([]);\n        setLoading(false);\n      }\n    };\n    if (user) {\n      fetchFavorites();\n    }\n  }, [user, allLocations, favoriteCounts]);\n\n  // ÂèñÊ∂àÊî∂ËóèÂáΩÊï∞\n  const handleRemoveFavorite = async (locationId, favoriteId) => {\n    try {\n      const res = await fetch(`http://localhost:3000/favorite/${locationId}`, {\n        method: \"DELETE\",\n        credentials: 'include'\n      });\n      if (!res.ok) {\n        if (res.status === 404) {\n          console.warn(\"Favorite not found, removing from local state\");\n        } else if (res.status === 401 || res.status === 403) {\n          alert(\"Please login to manage favorites\");\n          return;\n        } else {\n          throw new Error(`Failed to remove favorite: ${res.status}`);\n        }\n      }\n\n      // ‰ªéÁä∂ÊÄÅ‰∏≠ÁßªÈô§\n      setFavoriteLocations(prev => prev.filter(fav => fav.favoriteId !== favoriteId && fav.locationId !== locationId));\n\n      // Êõ¥Êñ∞Êî∂ËóèÊï∞Èáè\n      setFavoriteCounts(prev => ({\n        ...prev,\n        [locationId]: Math.max(0, (prev[locationId] || 0) - 1)\n      }));\n      console.log(\"Favorite removed successfully\");\n    } catch (err) {\n      console.error(\"Error removing favorite:\", err);\n      alert(\"Failed to remove favorite. Please try again.\");\n    }\n  };\n\n  // Ê∏ÖÁ©∫ÊâÄÊúâÊî∂Ëóè\n  const handleClearAllFavorites = async () => {\n    if (!window.confirm(\"Are you sure you want to remove all favorites?\")) {\n      return;\n    }\n    try {\n      const removePromises = favoriteLocations.map(location => fetch(`http://localhost:3000/favorite/${location.locationId}`, {\n        method: \"DELETE\",\n        credentials: 'include'\n      }));\n      const results = await Promise.allSettled(removePromises);\n      const failed = results.filter(result => result.status === 'rejected' || result.status === 'fulfilled' && !result.value.ok);\n      if (failed.length > 0) {\n        console.warn(`${failed.length} favorites failed to remove`);\n      }\n\n      // Ê∏ÖÁ©∫ÊâÄÊúâÊî∂Ëóè\n      setFavoriteLocations([]);\n\n      // ÈáçÁΩÆÊâÄÊúâÊî∂ËóèÊï∞Èáè\n      const resetCounts = {\n        ...favoriteCounts\n      };\n      favoriteLocations.forEach(loc => {\n        resetCounts[loc.locationId] = Math.max(0, (resetCounts[loc.locationId] || 0) - 1);\n      });\n      setFavoriteCounts(resetCounts);\n      alert(\"All favorites removed successfully\");\n    } catch (err) {\n      console.error(\"Error clearing all favorites:\", err);\n      alert(\"Failed to remove all favorites. Please try again.\");\n    }\n  };\n\n  // Ê†πÊçÆÊêúÁ¥¢ËØçËøáÊª§Êî∂ËóèÁöÑÂú∞ÁÇπ\n  const filteredFavorites = useMemo(() => {\n    if (!search.trim()) {\n      return favoriteLocations;\n    }\n    const searchTerm = search.toLowerCase().trim();\n    return favoriteLocations.filter(loc => {\n      var _loc$name, _loc$area;\n      return ((_loc$name = loc.name) === null || _loc$name === void 0 ? void 0 : _loc$name.toLowerCase().includes(searchTerm)) || ((_loc$area = loc.area) === null || _loc$area === void 0 ? void 0 : _loc$area.toLowerCase().includes(searchTerm));\n    });\n  }, [favoriteLocations, search]);\n\n  // ËÆ°ÁÆóÊî∂ËóèÁªüËÆ°\n  const stats = useMemo(() => {\n    const total = favoriteLocations.length;\n    const uniqueAreas = new Set(favoriteLocations.map(loc => loc.area)).size;\n    const totalEvents = favoriteLocations.reduce((sum, loc) => sum + (loc.events || 0), 0);\n    return {\n      total,\n      uniqueAreas,\n      totalEvents\n    };\n  }, [favoriteLocations]);\n\n  // Â¶ÇÊûúÊ≤°ÊúâÁî®Êà∑ÁôªÂΩïÔºåÊòæÁ§∫ÊèêÁ§∫‰ø°ÊÅØ\n  if (!user && !loading) {\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"locations-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u2B50 Your Favourite Locations\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-prompt\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please log in to view your favorite locations.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/login\",\n          className: \"login-link\",\n          children: \"Log in \\u2192\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this);\n  }\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"locations-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u2B50 Your Favourite Locations\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading your favorites...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"locations-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u2B50 Your Favourite Locations\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 7\n    }, this), favoriteLocations.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"favorites-stats\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: stats.total\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Total Favorites\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: stats.uniqueAreas\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Areas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: stats.totalEvents\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Total Events\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filters\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"search\",\n          children: \"Search in favorites:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"search\",\n          type: \"text\",\n          placeholder: \"Search location name or area...\",\n          value: search,\n          onChange: e => setSearch(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this), favoriteLocations.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"clear-all-btn\",\n          onClick: handleClearAllFavorites,\n          title: \"Remove all favorites\",\n          children: \"\\uD83D\\uDDD1\\uFE0F Clear All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 13\n        }, this), search.trim() && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"clear-search-btn\",\n          onClick: () => setSearch(\"\"),\n          children: \"Clear Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-container\",\n      children: filteredFavorites.length > 0 ? /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"locations-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Location Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Events\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Area\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Popularity\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: filteredFavorites.map(location => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"location-name\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: location.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 23\n                }, this), location.timestamp && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"favorite-date\",\n                  children: [\"Added: \", new Date(location.timestamp).toLocaleDateString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"events-count\",\n                children: location.events\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"area-badge\",\n                children: location.area\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"popularity-indicator\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"star-count\",\n                  children: [\"\\u2B50 \", location.favoriteCount || 0]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"popularity-bar\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"popularity-fill\",\n                    style: {\n                      width: `${Math.min(100, (location.favoriteCount || 0) * 20)}%`\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 368,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"remove-btn\",\n                onClick: () => handleRemoveFavorite(location.locationId, location.favoriteId),\n                title: \"Remove from favorites\",\n                children: \"Remove \\u274C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 19\n            }, this)]\n          }, location.favoriteId || location.locationId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 11\n      }, this) : search.trim() ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-results\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"No favorites found matching \\\"\", search, \"\\\".\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"clear-search-btn\",\n          onClick: () => setSearch(\"\"),\n          children: \"Clear Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-favorites\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-icon\",\n            children: \"\\u2B50\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"No favorites yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"You haven't added any locations to favorites yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/locations\",\n            className: \"browse-link\",\n            children: \"Browse Locations \\u2192\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 7\n    }, this), favoriteLocations.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"favorites-footer\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Showing \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: filteredFavorites.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 21\n        }, this), \" of\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: favoriteLocations.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 13\n        }, this), \" favorite locations\", search.trim() && ` matching \"${search}\"`]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 277,\n    columnNumber: 5\n  }, this);\n};\n_s(FavouritesPage, \"vlpvKQc2bXPk79E5ogqVuIDHQfc=\");\n_c = FavouritesPage;\nexport default FavouritesPage;\nvar _c;\n$RefreshReg$(_c, \"FavouritesPage\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","jsxDEV","_jsxDEV","FavouritesPage","_s","favoriteLocations","setFavoriteLocations","allLocations","setAllLocations","search","setSearch","loading","setLoading","user","setUser","favoriteCounts","setFavoriteCounts","checkAuth","res","fetch","credentials","ok","userData","json","err","console","error","fetchAllLocations","headers","Error","status","data","countsPromises","map","loc","countRes","id","countData","count","favoriteCount","countsResults","Promise","all","countsMap","forEach","result","enriched","name","events","Math","floor","random","area","fetchFavorites","warn","favorites","filter","item","location","_item$location","_item$location2","locationInfo","find","locationId","favoriteId","_id","timestamp","handleRemoveFavorite","method","alert","prev","fav","max","log","handleClearAllFavorites","window","confirm","removePromises","results","allSettled","failed","value","length","resetCounts","filteredFavorites","trim","searchTerm","toLowerCase","_loc$name","_loc$area","includes","stats","total","uniqueAreas","Set","size","totalEvents","reduce","sum","className","children","fileName","_jsxFileName","lineNumber","columnNumber","href","htmlFor","type","placeholder","onChange","e","target","onClick","title","Date","toLocaleDateString","style","width","min","_c","$RefreshReg$"],"sources":["C:/University/CSCI2720/project/CSCI2720/client/src/pages/FavouritesPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from \"react\";\r\nimport \"../styles/locations.css\";\r\n\r\nconst FavouritesPage = () => {\r\n  const [favoriteLocations, setFavoriteLocations] = useState([]);\r\n  const [allLocations, setAllLocations] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [user, setUser] = useState(null);\r\n  const [favoriteCounts, setFavoriteCounts] = useState({});\r\n\r\n  // Ëé∑ÂèñÂΩìÂâçÁî®Êà∑‰ø°ÊÅØÔºàÈÄöËøáAPIÊ£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅÔºâ\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      try {\r\n        const res = await fetch(\"http://localhost:3000/login/me\", {\r\n          credentials: 'include',\r\n        });\r\n        \r\n        if (res.ok) {\r\n          const userData = await res.json();\r\n          setUser(userData);\r\n        } else {\r\n          setUser(null);\r\n          setLoading(false);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Error checking auth:\", err);\r\n        setUser(null);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkAuth();\r\n  }, []);\r\n\r\n  // Ëé∑ÂèñÊâÄÊúâÂú∞ÁÇπÊï∞ÊçÆ\r\n  useEffect(() => {\r\n    const fetchAllLocations = async () => {\r\n      try {\r\n        const res = await fetch(\"http://localhost:3000/locations\", {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          credentials: 'include',\r\n        });\r\n\r\n        if (!res.ok) {\r\n          throw new Error(`Server error: ${res.status}`);\r\n        }\r\n\r\n        const data = await res.json();\r\n        \r\n        // Ëé∑ÂèñÊØè‰∏™Âú∞ÁÇπÁöÑÊî∂ËóèÊï∞Èáè\r\n        const countsPromises = data.map(async (loc) => {\r\n          try {\r\n            const countRes = await fetch(`http://localhost:3000/favorite/loc-num/${loc.id}`);\r\n            if (countRes.ok) {\r\n              const countData = await countRes.json();\r\n              return { id: loc.id, count: countData.favoriteCount };\r\n            }\r\n            return { id: loc.id, count: 0 };\r\n          } catch (err) {\r\n            console.error(`Error fetching favorite count for ${loc.id}:`, err);\r\n            return { id: loc.id, count: 0 };\r\n          }\r\n        });\r\n\r\n        const countsResults = await Promise.all(countsPromises);\r\n        const countsMap = {};\r\n        countsResults.forEach(result => {\r\n          countsMap[result.id] = result.count;\r\n        });\r\n        setFavoriteCounts(countsMap);\r\n\r\n        // Ê∑ªÂä†‰∫ã‰ª∂Êï∞ÈáèÔºàÂÆûÈôÖÂ∫îÁî®‰∏≠Â∫îËØ•‰ªéÂêéÁ´ØËé∑ÂèñÔºâ\r\n        const enriched = data.map((loc) => ({\r\n          id: loc.id,\r\n          name: loc.name,\r\n          events: Math.floor(Math.random() * 10) + 1,\r\n          area: loc.area || \"Unknown\",\r\n        }));\r\n\r\n        setAllLocations(enriched);\r\n      } catch (err) {\r\n        console.error(\"Error fetching /locations:\", err);\r\n      }\r\n    };\r\n\r\n    fetchAllLocations();\r\n  }, []);\r\n\r\n  // Ëé∑ÂèñÁî®Êà∑ÁöÑÊî∂ËóèÂàóË°®\r\n  useEffect(() => {\r\n    const fetchFavorites = async () => {\r\n      if (!user) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const res = await fetch(\"http://localhost:3000/favorite/my-all\", {\r\n          credentials: 'include',\r\n        });\r\n\r\n        if (!res.ok) {\r\n          if (res.status === 401 || res.status === 403) {\r\n            console.warn(\"User not authenticated for favorites\");\r\n            setFavoriteLocations([]);\r\n            setLoading(false);\r\n            return;\r\n          }\r\n          throw new Error(`Server error: ${res.status}`);\r\n        }\r\n\r\n        const data = await res.json();\r\n        \r\n        // ÊèêÂèñÊî∂ËóèÁöÑÂú∞ÁÇπ‰ø°ÊÅØ\r\n        const favorites = data\r\n          .filter(item => item.location) // Âè™‰øùÁïôÊúâÂú∞ÁÇπ‰ø°ÊÅØÁöÑ\r\n          .map(item => {\r\n            const locationInfo = allLocations.find(loc => loc.id === item.locationId);\r\n            return {\r\n              favoriteId: item.favoriteId || item._id,\r\n              locationId: item.locationId,\r\n              name: item.location?.name || locationInfo?.name || \"Unknown\",\r\n              events: locationInfo?.events || Math.floor(Math.random() * 10) + 1,\r\n              area: item.location?.area || locationInfo?.area || \"Unknown\",\r\n              favoriteCount: favoriteCounts[item.locationId] || 0,\r\n              timestamp: item.timestamp,\r\n            };\r\n          });\r\n\r\n        setFavoriteLocations(favorites);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error(\"Error fetching favorites:\", err);\r\n        setFavoriteLocations([]);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (user) {\r\n      fetchFavorites();\r\n    }\r\n  }, [user, allLocations, favoriteCounts]);\r\n\r\n  // ÂèñÊ∂àÊî∂ËóèÂáΩÊï∞\r\n  const handleRemoveFavorite = async (locationId, favoriteId) => {\r\n    try {\r\n      const res = await fetch(`http://localhost:3000/favorite/${locationId}`, {\r\n        method: \"DELETE\",\r\n        credentials: 'include',\r\n      });\r\n\r\n      if (!res.ok) {\r\n        if (res.status === 404) {\r\n          console.warn(\"Favorite not found, removing from local state\");\r\n        } else if (res.status === 401 || res.status === 403) {\r\n          alert(\"Please login to manage favorites\");\r\n          return;\r\n        } else {\r\n          throw new Error(`Failed to remove favorite: ${res.status}`);\r\n        }\r\n      }\r\n\r\n      // ‰ªéÁä∂ÊÄÅ‰∏≠ÁßªÈô§\r\n      setFavoriteLocations(prev => \r\n        prev.filter(fav => \r\n          fav.favoriteId !== favoriteId && fav.locationId !== locationId\r\n        )\r\n      );\r\n\r\n      // Êõ¥Êñ∞Êî∂ËóèÊï∞Èáè\r\n      setFavoriteCounts(prev => ({\r\n        ...prev,\r\n        [locationId]: Math.max(0, (prev[locationId] || 0) - 1)\r\n      }));\r\n\r\n      console.log(\"Favorite removed successfully\");\r\n    } catch (err) {\r\n      console.error(\"Error removing favorite:\", err);\r\n      alert(\"Failed to remove favorite. Please try again.\");\r\n    }\r\n  };\r\n\r\n  // Ê∏ÖÁ©∫ÊâÄÊúâÊî∂Ëóè\r\n  const handleClearAllFavorites = async () => {\r\n    if (!window.confirm(\"Are you sure you want to remove all favorites?\")) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const removePromises = favoriteLocations.map(location => \r\n        fetch(`http://localhost:3000/favorite/${location.locationId}`, {\r\n          method: \"DELETE\",\r\n          credentials: 'include',\r\n        })\r\n      );\r\n\r\n      const results = await Promise.allSettled(removePromises);\r\n      \r\n      const failed = results.filter(result => \r\n        result.status === 'rejected' || \r\n        (result.status === 'fulfilled' && !result.value.ok)\r\n      );\r\n\r\n      if (failed.length > 0) {\r\n        console.warn(`${failed.length} favorites failed to remove`);\r\n      }\r\n\r\n      // Ê∏ÖÁ©∫ÊâÄÊúâÊî∂Ëóè\r\n      setFavoriteLocations([]);\r\n      \r\n      // ÈáçÁΩÆÊâÄÊúâÊî∂ËóèÊï∞Èáè\r\n      const resetCounts = { ...favoriteCounts };\r\n      favoriteLocations.forEach(loc => {\r\n        resetCounts[loc.locationId] = Math.max(0, (resetCounts[loc.locationId] || 0) - 1);\r\n      });\r\n      setFavoriteCounts(resetCounts);\r\n\r\n      alert(\"All favorites removed successfully\");\r\n    } catch (err) {\r\n      console.error(\"Error clearing all favorites:\", err);\r\n      alert(\"Failed to remove all favorites. Please try again.\");\r\n    }\r\n  };\r\n\r\n  // Ê†πÊçÆÊêúÁ¥¢ËØçËøáÊª§Êî∂ËóèÁöÑÂú∞ÁÇπ\r\n  const filteredFavorites = useMemo(() => {\r\n    if (!search.trim()) {\r\n      return favoriteLocations;\r\n    }\r\n\r\n    const searchTerm = search.toLowerCase().trim();\r\n    return favoriteLocations.filter(loc =>\r\n      loc.name?.toLowerCase().includes(searchTerm) ||\r\n      loc.area?.toLowerCase().includes(searchTerm)\r\n    );\r\n  }, [favoriteLocations, search]);\r\n\r\n  // ËÆ°ÁÆóÊî∂ËóèÁªüËÆ°\r\n  const stats = useMemo(() => {\r\n    const total = favoriteLocations.length;\r\n    const uniqueAreas = new Set(favoriteLocations.map(loc => loc.area)).size;\r\n    const totalEvents = favoriteLocations.reduce((sum, loc) => sum + (loc.events || 0), 0);\r\n    \r\n    return { total, uniqueAreas, totalEvents };\r\n  }, [favoriteLocations]);\r\n\r\n  // Â¶ÇÊûúÊ≤°ÊúâÁî®Êà∑ÁôªÂΩïÔºåÊòæÁ§∫ÊèêÁ§∫‰ø°ÊÅØ\r\n  if (!user && !loading) {\r\n    return (\r\n      <main className=\"locations-page\">\r\n        <h2>‚≠ê Your Favourite Locations</h2>\r\n        <div className=\"login-prompt\">\r\n          <p>Please log in to view your favorite locations.</p>\r\n          <a href=\"/login\" className=\"login-link\">Log in ‚Üí</a>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <main className=\"locations-page\">\r\n        <h2>‚≠ê Your Favourite Locations</h2>\r\n        <div className=\"loading-spinner\">\r\n          <div className=\"spinner\"></div>\r\n          <p>Loading your favorites...</p>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className=\"locations-page\">\r\n      <h2>‚≠ê Your Favourite Locations</h2>\r\n\r\n      {/* Êî∂ËóèÁªüËÆ° */}\r\n      {favoriteLocations.length > 0 && (\r\n        <div className=\"favorites-stats\">\r\n          <div className=\"stat-card\">\r\n            <h3>{stats.total}</h3>\r\n            <p>Total Favorites</p>\r\n          </div>\r\n          <div className=\"stat-card\">\r\n            <h3>{stats.uniqueAreas}</h3>\r\n            <p>Areas</p>\r\n          </div>\r\n          <div className=\"stat-card\">\r\n            <h3>{stats.totalEvents}</h3>\r\n            <p>Total Events</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ÊêúÁ¥¢Ê°ÜÂíåÊìç‰Ωú */}\r\n      <div className=\"filters\">\r\n        <div className=\"filter-item\">\r\n          <label htmlFor=\"search\">Search in favorites:</label>\r\n          <input\r\n            id=\"search\"\r\n            type=\"text\"\r\n            placeholder=\"Search location name or area...\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n          />\r\n        </div>\r\n        \r\n        {favoriteLocations.length > 0 && (\r\n          <div className=\"filter-actions\">\r\n            <button\r\n              className=\"clear-all-btn\"\r\n              onClick={handleClearAllFavorites}\r\n              title=\"Remove all favorites\"\r\n            >\r\n              üóëÔ∏è Clear All\r\n            </button>\r\n            {search.trim() && (\r\n              <button \r\n                className=\"clear-search-btn\"\r\n                onClick={() => setSearch(\"\")}\r\n              >\r\n                Clear Search\r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Êî∂ËóèÂàóË°® */}\r\n      <div className=\"table-container\">\r\n        {filteredFavorites.length > 0 ? (\r\n          <table className=\"locations-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Location Name</th>\r\n                <th>Events</th>\r\n                <th>Area</th>\r\n                <th>Popularity</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filteredFavorites.map((location) => (\r\n                <tr key={location.favoriteId || location.locationId}>\r\n                  <td>\r\n                    <div className=\"location-name\">\r\n                      <strong>{location.name}</strong>\r\n                      {location.timestamp && (\r\n                        <span className=\"favorite-date\">\r\n                          Added: {new Date(location.timestamp).toLocaleDateString()}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <span className=\"events-count\">{location.events}</span>\r\n                  </td>\r\n                  <td>\r\n                    <span className=\"area-badge\">{location.area}</span>\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"popularity-indicator\">\r\n                      <span className=\"star-count\">‚≠ê {location.favoriteCount || 0}</span>\r\n                      <div className=\"popularity-bar\">\r\n                        <div \r\n                          className=\"popularity-fill\"\r\n                          style={{ \r\n                            width: `${Math.min(100, (location.favoriteCount || 0) * 20)}%` \r\n                          }}\r\n                        ></div>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <button\r\n                      className=\"remove-btn\"\r\n                      onClick={() => handleRemoveFavorite(location.locationId, location.favoriteId)}\r\n                      title=\"Remove from favorites\"\r\n                    >\r\n                      Remove ‚ùå\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        ) : search.trim() ? (\r\n          <div className=\"no-results\">\r\n            <p>No favorites found matching \"{search}\".</p>\r\n            <button \r\n              className=\"clear-search-btn\"\r\n              onClick={() => setSearch(\"\")}\r\n            >\r\n              Clear Search\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"no-favorites\">\r\n            <div className=\"empty-state\">\r\n              <div className=\"empty-icon\">‚≠ê</div>\r\n              <h3>No favorites yet</h3>\r\n              <p>You haven't added any locations to favorites yet.</p>\r\n              <a href=\"/locations\" className=\"browse-link\">\r\n                Browse Locations ‚Üí\r\n              </a>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* ÊòæÁ§∫Êï∞Èáè‰ø°ÊÅØ */}\r\n      {favoriteLocations.length > 0 && (\r\n        <div className=\"favorites-footer\">\r\n          <p>\r\n            Showing <strong>{filteredFavorites.length}</strong> of{\" \"}\r\n            <strong>{favoriteLocations.length}</strong> favorite locations\r\n            {search.trim() && ` matching \"${search}\"`}\r\n          </p>\r\n        </div>\r\n      )}\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default FavouritesPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}