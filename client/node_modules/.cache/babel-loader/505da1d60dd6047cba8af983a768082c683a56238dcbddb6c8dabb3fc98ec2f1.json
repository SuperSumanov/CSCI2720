{"ast":null,"code":"var _jsxFileName = \"C:\\\\University\\\\CSCI2720\\\\project\\\\CSCI2720\\\\client\\\\src\\\\pages\\\\AdminUsersPage.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useMemo, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport \"../styles/locations.css\";\n\n// 添加用户模态框组件\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UserModal = ({\n  isOpen,\n  onClose,\n  onSubmit,\n  user = null\n}) => {\n  _s();\n  const [formData, setFormData] = useState({\n    username: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    role: \"user\"\n  });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState(\"\");\n  useEffect(() => {\n    if (user) {\n      setFormData({\n        username: user.username || \"\",\n        password: \"\",\n        confirmPassword: \"\",\n        role: user.role || \"user\"\n      });\n    } else {\n      setFormData({\n        username: \"\",\n        password: \"\",\n        confirmPassword: \"\",\n        role: \"user\"\n      });\n    }\n    setError(\"\");\n  }, [user]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (error) setError(\"\");\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // 验证表单\n    if (!user && (!formData.password || !formData.confirmPassword)) {\n      setError(\"Password is required for new users\");\n      return;\n    }\n    if (!user && formData.password !== formData.confirmPassword) {\n      setError(\"Passwords do not match\");\n      return;\n    }\n    if (formData.password && formData.password.length < 6) {\n      setError(\"Password must be at least 6 characters\");\n      return;\n    }\n    setIsSubmitting(true);\n    setError(\"\");\n    try {\n      // 准备提交的数据\n      const submitData = {\n        username: formData.username,\n        role: formData.role\n      };\n\n      // 如果有密码，添加到提交数据中\n      if (formData.password) {\n        submitData.password = formData.password;\n      }\n      await onSubmit(submitData);\n      onClose();\n    } catch (err) {\n      setError(err.message || \"Failed to save user\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"fixed\",\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundColor: \"rgba(0,0,0,0.5)\",\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      zIndex: 1000\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: \"white\",\n        padding: \"2rem\",\n        borderRadius: \"8px\",\n        width: \"90%\",\n        maxWidth: \"500px\",\n        maxHeight: \"90vh\",\n        overflowY: \"auto\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginBottom: \"1rem\",\n          color: \"#333\"\n        },\n        children: user ? \"Edit User\" : \"Add New User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: \"0.75rem\",\n          marginBottom: \"1rem\",\n          backgroundColor: \"#f8d7da\",\n          color: \"#721c24\",\n          border: \"1px solid #f5c6cb\",\n          borderRadius: \"4px\",\n          fontSize: \"0.9rem\"\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: \"1rem\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: \"block\",\n              marginBottom: \"0.3rem\",\n              fontWeight: \"600\"\n            },\n            children: \"Username *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"username\",\n            value: formData.username,\n            onChange: handleChange,\n            required: true,\n            disabled: isSubmitting || user // 编辑时不能修改用户名\n            ,\n            style: {\n              width: \"100%\",\n              padding: \"0.5rem\",\n              border: \"1px solid #ccc\",\n              borderRadius: \"4px\",\n              backgroundColor: isSubmitting || user ? \"#f8f9fa\" : \"white\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), !user && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: \"1rem\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: \"block\",\n                marginBottom: \"0.3rem\",\n                fontWeight: \"600\"\n              },\n              children: \"Password *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              name: \"password\",\n              value: formData.password,\n              onChange: handleChange,\n              required: !user,\n              disabled: isSubmitting,\n              style: {\n                width: \"100%\",\n                padding: \"0.5rem\",\n                border: \"1px solid #ccc\",\n                borderRadius: \"4px\",\n                backgroundColor: isSubmitting ? \"#f8f9fa\" : \"white\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: \"1rem\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: \"block\",\n                marginBottom: \"0.3rem\",\n                fontWeight: \"600\"\n              },\n              children: \"Confirm Password *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              name: \"confirmPassword\",\n              value: formData.confirmPassword,\n              onChange: handleChange,\n              required: !user,\n              disabled: isSubmitting,\n              style: {\n                width: \"100%\",\n                padding: \"0.5rem\",\n                border: \"1px solid #ccc\",\n                borderRadius: \"4px\",\n                backgroundColor: isSubmitting ? \"#f8f9fa\" : \"white\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: \"1.5rem\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: \"block\",\n              marginBottom: \"0.3rem\",\n              fontWeight: \"600\"\n            },\n            children: \"Role *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"role\",\n            value: formData.role,\n            onChange: handleChange,\n            required: true,\n            disabled: isSubmitting,\n            style: {\n              width: \"100%\",\n              padding: \"0.5rem\",\n              border: \"1px solid #ccc\",\n              borderRadius: \"4px\",\n              backgroundColor: isSubmitting ? \"#f8f9fa\" : \"white\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"user\",\n              children: \"User\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"admin\",\n              children: \"Admin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"flex-end\",\n            gap: \"1rem\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onClose,\n            disabled: isSubmitting,\n            style: {\n              padding: \"0.6rem 1.2rem\",\n              backgroundColor: isSubmitting ? \"#adb5bd\" : \"#6c757d\",\n              color: \"white\",\n              border: \"none\",\n              borderRadius: \"4px\",\n              cursor: isSubmitting ? \"not-allowed\" : \"pointer\"\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: isSubmitting,\n            style: {\n              padding: \"0.6rem 1.2rem\",\n              backgroundColor: isSubmitting ? \"#6c98ea\" : \"#2c7be5\",\n              color: \"white\",\n              border: \"none\",\n              borderRadius: \"4px\",\n              cursor: isSubmitting ? \"not-allowed\" : \"pointer\",\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: \"0.5rem\"\n            },\n            children: [isSubmitting && /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                width: \"12px\",\n                height: \"12px\",\n                border: \"2px solid white\",\n                borderTopColor: \"transparent\",\n                borderRadius: \"50%\",\n                animation: \"spin 1s linear infinite\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 17\n            }, this), user ? \"Update\" : \"Add\", \" User\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n        children: `\n            @keyframes spin {\n              0% { transform: rotate(0deg); }\n              100% { transform: rotate(360deg); }\n            }\n          `\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n\n// 分页组件（与AdminEventsPage相同）\n_s(UserModal, \"iDAj3YuJGrbxhqKXg3EOvPeAh6c=\");\n_c = UserModal;\nconst Pagination = ({\n  currentPage,\n  totalPages,\n  onPageChange\n}) => {\n  const maxVisiblePages = 5;\n  const getPageNumbers = () => {\n    const pages = [];\n    if (totalPages <= maxVisiblePages) {\n      for (let i = 1; i <= totalPages; i++) {\n        pages.push(i);\n      }\n    } else {\n      let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));\n      let endPage = startPage + maxVisiblePages - 1;\n      if (endPage > totalPages) {\n        endPage = totalPages;\n        startPage = Math.max(1, endPage - maxVisiblePages + 1);\n      }\n      for (let i = startPage; i <= endPage; i++) {\n        pages.push(i);\n      }\n    }\n    return pages;\n  };\n  const pageNumbers = getPageNumbers();\n  if (totalPages <= 1) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      gap: \"0.5rem\",\n      marginTop: \"2rem\",\n      padding: \"1rem\",\n      flexWrap: \"wrap\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => onPageChange(1),\n      disabled: currentPage === 1,\n      style: {\n        padding: \"0.5rem 1rem\",\n        backgroundColor: currentPage === 1 ? \"#e9ecef\" : \"#fff\",\n        color: currentPage === 1 ? \"#6c757d\" : \"#2c7be5\",\n        border: \"1px solid #dee2e6\",\n        borderRadius: \"4px\",\n        cursor: currentPage === 1 ? \"not-allowed\" : \"pointer\",\n        fontSize: \"0.9rem\"\n      },\n      children: \"First\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => onPageChange(currentPage - 1),\n      disabled: currentPage === 1,\n      style: {\n        padding: \"0.5rem 1rem\",\n        backgroundColor: currentPage === 1 ? \"#e9ecef\" : \"#fff\",\n        color: currentPage === 1 ? \"#6c757d\" : \"#2c7be5\",\n        border: \"1px solid #dee2e6\",\n        borderRadius: \"4px\",\n        cursor: currentPage === 1 ? \"not-allowed\" : \"pointer\",\n        fontSize: \"0.9rem\"\n      },\n      children: \"Previous\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 7\n    }, this), pageNumbers[0] > 1 && /*#__PURE__*/_jsxDEV(\"span\", {\n      style: {\n        color: \"#6c757d\",\n        padding: \"0 0.5rem\"\n      },\n      children: \"...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 9\n    }, this), pageNumbers.map(page => /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => onPageChange(page),\n      style: {\n        padding: \"0.5rem 1rem\",\n        backgroundColor: currentPage === page ? \"#2c7be5\" : \"#fff\",\n        color: currentPage === page ? \"#fff\" : \"#2c7be5\",\n        border: \"1px solid #dee2e6\",\n        borderRadius: \"4px\",\n        cursor: \"pointer\",\n        fontWeight: currentPage === page ? \"bold\" : \"normal\",\n        fontSize: \"0.9rem\"\n      },\n      children: page\n    }, page, false, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 9\n    }, this)), pageNumbers[pageNumbers.length - 1] < totalPages && /*#__PURE__*/_jsxDEV(\"span\", {\n      style: {\n        color: \"#6c757d\",\n        padding: \"0 0.5rem\"\n      },\n      children: \"...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => onPageChange(currentPage + 1),\n      disabled: currentPage === totalPages,\n      style: {\n        padding: \"0.5rem 1rem\",\n        backgroundColor: currentPage === totalPages ? \"#e9ecef\" : \"#fff\",\n        color: currentPage === totalPages ? \"#6c757d\" : \"#2c7be5\",\n        border: \"1px solid #dee2e6\",\n        borderRadius: \"4px\",\n        cursor: currentPage === totalPages ? \"not-allowed\" : \"pointer\",\n        fontSize: \"0.9rem\"\n      },\n      children: \"Next\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => onPageChange(totalPages),\n      disabled: currentPage === totalPages,\n      style: {\n        padding: \"0.5rem 1rem\",\n        backgroundColor: currentPage === totalPages ? \"#e9ecef\" : \"#fff\",\n        color: currentPage === totalPages ? \"#6c757d\" : \"#2c7be5\",\n        border: \"1px solid #dee2e6\",\n        borderRadius: \"4px\",\n        cursor: currentPage === totalPages ? \"not-allowed\" : \"pointer\",\n        fontSize: \"0.9rem\"\n      },\n      children: \"Last\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      style: {\n        marginLeft: \"1rem\",\n        color: \"#6c757d\",\n        fontSize: \"0.9rem\"\n      },\n      children: [\"Page \", currentPage, \" of \", totalPages]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 303,\n    columnNumber: 5\n  }, this);\n};\n\n// 页面大小选择器\n_c2 = Pagination;\nconst PageSizeSelector = ({\n  pageSize,\n  onChange\n}) => {\n  const options = [10, 25, 50, 100];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      alignItems: \"center\",\n      gap: \"0.5rem\",\n      marginTop: \"1rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      style: {\n        fontSize: \"0.9rem\",\n        color: \"#666\"\n      },\n      children: \"Show:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: pageSize,\n      onChange: e => onChange(Number(e.target.value)),\n      style: {\n        padding: \"0.4rem 0.6rem\",\n        border: \"1px solid #ccc\",\n        borderRadius: \"4px\",\n        backgroundColor: \"#fff\",\n        fontSize: \"0.9rem\"\n      },\n      children: options.map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: option,\n        children: [option, \" per page\"]\n      }, option, true, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 415,\n    columnNumber: 5\n  }, this);\n};\n_c3 = PageSizeSelector;\nconst AdminUsersPage = () => {\n  _s2();\n  const {\n    user: currentUser,\n    loading: authLoading\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const [users, setUsers] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [editingUser, setEditingUser] = useState(null);\n  const [fetchError, setFetchError] = useState(\"\");\n\n  // 分页状态\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageSize, setPageSize] = useState(10);\n  const [totalPages, setTotalPages] = useState(1);\n\n  // 检查用户是否已登录且是管理员\n  useEffect(() => {\n    if (!authLoading && !currentUser) {\n      navigate('/login');\n      return;\n    }\n    if (!authLoading && currentUser && currentUser.role !== 'admin') {\n      navigate('/');\n      return;\n    }\n    if (currentUser && currentUser.role === 'admin') {\n      fetchUsers();\n    }\n  }, [currentUser, authLoading, navigate]);\n\n  // 加载用户数据\n  const fetchUsers = async () => {\n    try {\n      setLoading(true);\n      setFetchError(\"\");\n      const res = await fetch(\"/admin/users\", {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"include\"\n      });\n      if (!res.ok) {\n        if (res.status === 401) {\n          navigate('/login');\n          throw new Error(\"Authentication required. Please log in again.\");\n        } else if (res.status === 403) {\n          navigate('/');\n          throw new Error(\"You don't have permission to access this page.\");\n        } else {\n          throw new Error(`Failed to fetch users: ${res.status}`);\n        }\n      }\n      const data = await res.json();\n      setUsers(data);\n    } catch (err) {\n      console.error(\"Error fetching users:\", err);\n      setFetchError(err.message || \"Failed to load users. Please try again later.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (currentUser && currentUser.role === 'admin') {\n      fetchUsers();\n    }\n  }, [currentUser]);\n\n  // 搜索过滤\n  const filteredUsers = useMemo(() => {\n    return users.filter(user => {\n      var _user$username, _user$role;\n      return ((_user$username = user.username) === null || _user$username === void 0 ? void 0 : _user$username.toLowerCase().includes(search.toLowerCase())) || ((_user$role = user.role) === null || _user$role === void 0 ? void 0 : _user$role.toLowerCase().includes(search.toLowerCase()));\n    });\n  }, [users, search]);\n\n  // 计算分页数据\n  useEffect(() => {\n    const total = Math.ceil(filteredUsers.length / pageSize);\n    setTotalPages(total > 0 ? total : 1);\n\n    // 如果当前页超过总页数，跳转到第一页\n    if (currentPage > total && total > 0) {\n      setCurrentPage(1);\n    }\n  }, [filteredUsers, pageSize, currentPage]);\n\n  // 获取当前页的数据\n  const paginatedUsers = useMemo(() => {\n    const startIndex = (currentPage - 1) * pageSize;\n    const endIndex = startIndex + pageSize;\n    return filteredUsers.slice(startIndex, endIndex);\n  }, [filteredUsers, currentPage, pageSize]);\n\n  // 模态框处理函数\n  const handleAddClick = () => {\n    setEditingUser(null);\n    setModalOpen(true);\n  };\n  const handleEditClick = user => {\n    setEditingUser(user);\n    setModalOpen(true);\n  };\n  const handleModalSubmit = async formData => {\n    try {\n      let res;\n      let method;\n      let url;\n      if (editingUser) {\n        // 更新现有用户\n        method = \"PUT\";\n        url = `/admin/users/${editingUser.username}`;\n      } else {\n        // 添加新用户\n        method = \"POST\";\n        url = `/admin/users`;\n      }\n      res = await fetch(url, {\n        method,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"include\",\n        body: JSON.stringify(formData)\n      });\n      const responseData = await res.json();\n      if (!res.ok) {\n        throw new Error(responseData.error || `Failed to ${editingUser ? 'update' : 'add'} user`);\n      }\n\n      // 重新获取数据以确保与数据库同步\n      await fetchUsers();\n    } catch (err) {\n      console.error(\"Error saving user:\", err);\n      throw err;\n    }\n  };\n  const handleDelete = async username => {\n    // 不能删除当前登录的用户\n    if (username === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.username)) {\n      alert(\"You cannot delete your own account while logged in.\");\n      return;\n    }\n    if (!window.confirm(`Are you sure you want to delete user \"${username}\"? This action cannot be undone.`)) return;\n    try {\n      const res = await fetch(`/admin/users/${username}`, {\n        method: \"DELETE\",\n        credentials: \"include\"\n      });\n      if (!res.ok) {\n        const errorData = await res.json().catch(() => ({}));\n        throw new Error(errorData.error || \"Failed to delete user\");\n      }\n\n      // 重新获取数据以确保与数据库同步\n      await fetchUsers();\n    } catch (err) {\n      console.error(\"Error deleting user:\", err);\n      alert(`Error deleting user: ${err.message}`);\n    }\n  };\n  const handleReset2FA = async username => {\n    if (!window.confirm(`Are you sure you want to reset 2FA for user \"${username}\"?`)) return;\n    try {\n      const res = await fetch(`/admin/users/${username}/reset-2fa`, {\n        method: \"POST\",\n        credentials: \"include\"\n      });\n      if (!res.ok) {\n        const errorData = await res.json().catch(() => ({}));\n        throw new Error(errorData.error || \"Failed to reset 2FA\");\n      }\n      alert(`2FA has been reset for user \"${username}\"`);\n      // 可选：重新获取数据以更新显示\n      await fetchUsers();\n    } catch (err) {\n      console.error(\"Error resetting 2FA:\", err);\n      alert(`Error resetting 2FA: ${err.message}`);\n    }\n  };\n\n  // 分页处理函数\n  const handlePageChange = page => {\n    setCurrentPage(page);\n    // 滚动到表格顶部\n    const tableContainer = document.querySelector('.table-container');\n    if (tableContainer) {\n      tableContainer.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start'\n      });\n    }\n  };\n  const handlePageSizeChange = newSize => {\n    setPageSize(newSize);\n    setCurrentPage(1); // 重置到第一页\n  };\n  if (authLoading) {\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"locations-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Manage Users\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 662,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          height: \"200px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Checking authentication...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 669,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 663,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 661,\n      columnNumber: 7\n    }, this);\n  }\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"locations-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Manage Users\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 678,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          height: \"200px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading users from server...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 685,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 679,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 677,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"locations-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Manage Users\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 693,\n      columnNumber: 7\n    }, this), fetchError && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"1rem\",\n        marginBottom: \"1rem\",\n        backgroundColor: \"#f8d7da\",\n        color: \"#721c24\",\n        border: \"1px solid #f5c6cb\",\n        borderRadius: \"4px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Error:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 704,\n        columnNumber: 11\n      }, this), \" \", fetchError, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: fetchUsers,\n        style: {\n          marginLeft: \"1rem\",\n          padding: \"0.25rem 0.75rem\",\n          backgroundColor: \"#dc3545\",\n          color: \"white\",\n          border: \"none\",\n          borderRadius: \"4px\",\n          cursor: \"pointer\"\n        },\n        children: \"Retry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 705,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 696,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filters\",\n      style: {\n        justifyContent: \"space-between\",\n        alignItems: \"flex-end\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-item\",\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"search\",\n          children: \"Search users:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 725,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"search\",\n          type: \"text\",\n          placeholder: \"Search by username or role...\",\n          value: search,\n          onChange: e => {\n            setSearch(e.target.value);\n            setCurrentPage(1); // 搜索时重置到第一页\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 726,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 724,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleAddClick,\n        style: {\n          padding: \"0.6rem 1rem\",\n          backgroundColor: \"#2c7be5\",\n          color: \"white\",\n          border: \"none\",\n          borderRadius: \"6px\",\n          cursor: \"pointer\",\n          height: \"fit-content\",\n          minHeight: \"38px\"\n        },\n        children: \"+ Add New User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 738,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 723,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PageSizeSelector, {\n      pageSize: pageSize,\n      onChange: handlePageSizeChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 756,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: \"1rem 0\",\n        color: \"#666\",\n        fontSize: \"0.9rem\",\n        textAlign: \"right\"\n      },\n      children: [\"Showing \", (currentPage - 1) * pageSize + 1, \" - \", Math.min(currentPage * pageSize, filteredUsers.length), \" of \", filteredUsers.length, \" users\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 759,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-container\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"locations-table\",\n        style: {\n          minWidth: \"800px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: \"40%\"\n              },\n              children: \"Username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 775,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: \"20%\"\n              },\n              children: \"Role\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 776,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: \"20%\"\n              },\n              children: \"2FA Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 777,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: \"20%\"\n              },\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 778,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 774,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 773,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: paginatedUsers.length > 0 ? paginatedUsers.map(user => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: [user.username, user.username === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.username) && /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  marginLeft: \"0.5rem\",\n                  backgroundColor: \"#2c7be5\",\n                  color: \"white\",\n                  padding: \"0.1rem 0.4rem\",\n                  borderRadius: \"3px\",\n                  fontSize: \"0.75rem\"\n                },\n                children: \"You\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 788,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 785,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  backgroundColor: user.role === 'admin' ? \"#dc3545\" : \"#28a745\",\n                  color: \"white\",\n                  padding: \"0.2rem 0.5rem\",\n                  borderRadius: \"4px\",\n                  fontSize: \"0.85rem\"\n                },\n                children: user.role\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 801,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 800,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: user.twoFactorEnabled ? /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"#28a745\",\n                  fontWeight: \"bold\"\n                },\n                children: \"Enabled\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 813,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"#6c757d\"\n                },\n                children: \"Disabled\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 815,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 811,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: \"flex\",\n                  gap: \"0.5rem\",\n                  flexWrap: \"wrap\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  style: {\n                    backgroundColor: \"#ffc107\",\n                    border: \"none\",\n                    padding: \"0.4rem 0.7rem\",\n                    borderRadius: \"4px\",\n                    cursor: \"pointer\",\n                    whiteSpace: \"nowrap\"\n                  },\n                  onClick: () => handleEditClick(user),\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 820,\n                  columnNumber: 23\n                }, this), user.twoFactorEnabled && user.role !== 'admin' && /*#__PURE__*/_jsxDEV(\"button\", {\n                  style: {\n                    backgroundColor: \"#17a2b8\",\n                    border: \"none\",\n                    padding: \"0.4rem 0.7rem\",\n                    borderRadius: \"4px\",\n                    color: \"white\",\n                    cursor: \"pointer\",\n                    whiteSpace: \"nowrap\"\n                  },\n                  onClick: () => handleReset2FA(user.username),\n                  children: \"Reset 2FA\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 834,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  style: {\n                    backgroundColor: \"#dc3545\",\n                    border: \"none\",\n                    padding: \"0.4rem 0.7rem\",\n                    borderRadius: \"4px\",\n                    color: \"white\",\n                    cursor: user.username === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.username) ? \"not-allowed\" : \"pointer\",\n                    whiteSpace: \"nowrap\",\n                    opacity: user.username === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.username) ? 0.6 : 1\n                  },\n                  onClick: () => handleDelete(user.username),\n                  disabled: user.username === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.username),\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 849,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 819,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 818,\n              columnNumber: 19\n            }, this)]\n          }, user._id || user.username, true, {\n            fileName: _jsxFileName,\n            lineNumber: 784,\n            columnNumber: 17\n          }, this)) : /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: \"4\",\n              className: \"no-results\",\n              children: search ? \"No users match your search\" : \"No users found\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 871,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 870,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 781,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 772,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 771,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      currentPage: currentPage,\n      totalPages: totalPages,\n      onPageChange: handlePageChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 881,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(UserModal, {\n      isOpen: modalOpen,\n      onClose: () => setModalOpen(false),\n      onSubmit: handleModalSubmit,\n      user: editingUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 888,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 692,\n    columnNumber: 5\n  }, this);\n};\n_s2(AdminUsersPage, \"BIsZ0+zeXjH2uiTd5jCiqelyNI8=\", false, function () {\n  return [useNavigate];\n});\n_c4 = AdminUsersPage;\nexport default AdminUsersPage;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"UserModal\");\n$RefreshReg$(_c2, \"Pagination\");\n$RefreshReg$(_c3, \"PageSizeSelector\");\n$RefreshReg$(_c4, \"AdminUsersPage\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useContext","useNavigate","AuthContext","jsxDEV","_jsxDEV","Fragment","_Fragment","UserModal","isOpen","onClose","onSubmit","user","_s","formData","setFormData","username","password","confirmPassword","role","isSubmitting","setIsSubmitting","error","setError","handleChange","e","name","value","target","prev","handleSubmit","preventDefault","length","submitData","err","message","style","position","top","left","right","bottom","backgroundColor","display","justifyContent","alignItems","zIndex","children","padding","borderRadius","width","maxWidth","maxHeight","overflowY","marginBottom","color","fileName","_jsxFileName","lineNumber","columnNumber","border","fontSize","fontWeight","type","onChange","required","disabled","gap","onClick","cursor","height","borderTopColor","animation","_c","Pagination","currentPage","totalPages","onPageChange","maxVisiblePages","getPageNumbers","pages","i","push","startPage","Math","max","floor","endPage","pageNumbers","marginTop","flexWrap","map","page","marginLeft","_c2","PageSizeSelector","pageSize","options","Number","option","_c3","AdminUsersPage","_s2","currentUser","loading","authLoading","navigate","users","setUsers","search","setSearch","setLoading","modalOpen","setModalOpen","editingUser","setEditingUser","fetchError","setFetchError","setCurrentPage","setPageSize","setTotalPages","fetchUsers","res","fetch","headers","credentials","ok","status","Error","data","json","console","filteredUsers","filter","_user$username","_user$role","toLowerCase","includes","total","ceil","paginatedUsers","startIndex","endIndex","slice","handleAddClick","handleEditClick","handleModalSubmit","method","url","body","JSON","stringify","responseData","handleDelete","alert","window","confirm","errorData","catch","handleReset2FA","handlePageChange","tableContainer","document","querySelector","scrollIntoView","behavior","block","handlePageSizeChange","newSize","className","flex","htmlFor","id","placeholder","minHeight","margin","textAlign","min","minWidth","twoFactorEnabled","whiteSpace","opacity","_id","colSpan","_c4","$RefreshReg$"],"sources":["C:/University/CSCI2720/project/CSCI2720/client/src/pages/AdminUsersPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo, useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport \"../styles/locations.css\";\r\n\r\n// 添加用户模态框组件\r\nconst UserModal = ({ isOpen, onClose, onSubmit, user = null }) => {\r\n  const [formData, setFormData] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n    confirmPassword: \"\",\r\n    role: \"user\"\r\n  });\r\n\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      setFormData({\r\n        username: user.username || \"\",\r\n        password: \"\",\r\n        confirmPassword: \"\",\r\n        role: user.role || \"user\"\r\n      });\r\n    } else {\r\n      setFormData({\r\n        username: \"\",\r\n        password: \"\",\r\n        confirmPassword: \"\",\r\n        role: \"user\"\r\n      });\r\n    }\r\n    setError(\"\");\r\n  }, [user]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n    if (error) setError(\"\");\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    // 验证表单\r\n    if (!user && (!formData.password || !formData.confirmPassword)) {\r\n      setError(\"Password is required for new users\");\r\n      return;\r\n    }\r\n    \r\n    if (!user && formData.password !== formData.confirmPassword) {\r\n      setError(\"Passwords do not match\");\r\n      return;\r\n    }\r\n    \r\n    if (formData.password && formData.password.length < 6) {\r\n      setError(\"Password must be at least 6 characters\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setError(\"\");\r\n    \r\n    try {\r\n      // 准备提交的数据\r\n      const submitData = {\r\n        username: formData.username,\r\n        role: formData.role\r\n      };\r\n      \r\n      // 如果有密码，添加到提交数据中\r\n      if (formData.password) {\r\n        submitData.password = formData.password;\r\n      }\r\n      \r\n      await onSubmit(submitData);\r\n      onClose();\r\n    } catch (err) {\r\n      setError(err.message || \"Failed to save user\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div style={{\r\n      position: \"fixed\",\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      backgroundColor: \"rgba(0,0,0,0.5)\",\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n      zIndex: 1000\r\n    }}>\r\n      <div style={{\r\n        backgroundColor: \"white\",\r\n        padding: \"2rem\",\r\n        borderRadius: \"8px\",\r\n        width: \"90%\",\r\n        maxWidth: \"500px\",\r\n        maxHeight: \"90vh\",\r\n        overflowY: \"auto\"\r\n      }}>\r\n        <h3 style={{ marginBottom: \"1rem\", color: \"#333\" }}>\r\n          {user ? \"Edit User\" : \"Add New User\"}\r\n        </h3>\r\n        \r\n        {error && (\r\n          <div style={{\r\n            padding: \"0.75rem\",\r\n            marginBottom: \"1rem\",\r\n            backgroundColor: \"#f8d7da\",\r\n            color: \"#721c24\",\r\n            border: \"1px solid #f5c6cb\",\r\n            borderRadius: \"4px\",\r\n            fontSize: \"0.9rem\"\r\n          }}>\r\n            {error}\r\n          </div>\r\n        )}\r\n        \r\n        <form onSubmit={handleSubmit}>\r\n          <div style={{ marginBottom: \"1rem\" }}>\r\n            <label style={{ display: \"block\", marginBottom: \"0.3rem\", fontWeight: \"600\" }}>\r\n              Username *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"username\"\r\n              value={formData.username}\r\n              onChange={handleChange}\r\n              required\r\n              disabled={isSubmitting || user} // 编辑时不能修改用户名\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"0.5rem\",\r\n                border: \"1px solid #ccc\",\r\n                borderRadius: \"4px\",\r\n                backgroundColor: isSubmitting || user ? \"#f8f9fa\" : \"white\"\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          {!user && (\r\n            <>\r\n              <div style={{ marginBottom: \"1rem\" }}>\r\n                <label style={{ display: \"block\", marginBottom: \"0.3rem\", fontWeight: \"600\" }}>\r\n                  Password *\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  value={formData.password}\r\n                  onChange={handleChange}\r\n                  required={!user}\r\n                  disabled={isSubmitting}\r\n                  style={{\r\n                    width: \"100%\",\r\n                    padding: \"0.5rem\",\r\n                    border: \"1px solid #ccc\",\r\n                    borderRadius: \"4px\",\r\n                    backgroundColor: isSubmitting ? \"#f8f9fa\" : \"white\"\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              <div style={{ marginBottom: \"1rem\" }}>\r\n                <label style={{ display: \"block\", marginBottom: \"0.3rem\", fontWeight: \"600\" }}>\r\n                  Confirm Password *\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  name=\"confirmPassword\"\r\n                  value={formData.confirmPassword}\r\n                  onChange={handleChange}\r\n                  required={!user}\r\n                  disabled={isSubmitting}\r\n                  style={{\r\n                    width: \"100%\",\r\n                    padding: \"0.5rem\",\r\n                    border: \"1px solid #ccc\",\r\n                    borderRadius: \"4px\",\r\n                    backgroundColor: isSubmitting ? \"#f8f9fa\" : \"white\"\r\n                  }}\r\n                />\r\n              </div>\r\n            </>\r\n          )}\r\n          <div style={{ marginBottom: \"1.5rem\" }}>\r\n            <label style={{ display: \"block\", marginBottom: \"0.3rem\", fontWeight: \"600\" }}>\r\n              Role *\r\n            </label>\r\n            <select\r\n              name=\"role\"\r\n              value={formData.role}\r\n              onChange={handleChange}\r\n              required\r\n              disabled={isSubmitting}\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"0.5rem\",\r\n                border: \"1px solid #ccc\",\r\n                borderRadius: \"4px\",\r\n                backgroundColor: isSubmitting ? \"#f8f9fa\" : \"white\"\r\n              }}\r\n            >\r\n              <option value=\"user\">User</option>\r\n              <option value=\"admin\">Admin</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div style={{ display: \"flex\", justifyContent: \"flex-end\", gap: \"1rem\" }}>\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              disabled={isSubmitting}\r\n              style={{\r\n                padding: \"0.6rem 1.2rem\",\r\n                backgroundColor: isSubmitting ? \"#adb5bd\" : \"#6c757d\",\r\n                color: \"white\",\r\n                border: \"none\",\r\n                borderRadius: \"4px\",\r\n                cursor: isSubmitting ? \"not-allowed\" : \"pointer\"\r\n              }}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isSubmitting}\r\n              style={{\r\n                padding: \"0.6rem 1.2rem\",\r\n                backgroundColor: isSubmitting ? \"#6c98ea\" : \"#2c7be5\",\r\n                color: \"white\",\r\n                border: \"none\",\r\n                borderRadius: \"4px\",\r\n                cursor: isSubmitting ? \"not-allowed\" : \"pointer\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"0.5rem\"\r\n              }}\r\n            >\r\n              {isSubmitting && (\r\n                <span style={{ width: \"12px\", height: \"12px\", border: \"2px solid white\", borderTopColor: \"transparent\", borderRadius: \"50%\", animation: \"spin 1s linear infinite\" }}></span>\r\n              )}\r\n              {user ? \"Update\" : \"Add\"} User\r\n            </button>\r\n          </div>\r\n        </form>\r\n        \r\n        <style>\r\n          {`\r\n            @keyframes spin {\r\n              0% { transform: rotate(0deg); }\r\n              100% { transform: rotate(360deg); }\r\n            }\r\n          `}\r\n        </style>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// 分页组件（与AdminEventsPage相同）\r\nconst Pagination = ({ currentPage, totalPages, onPageChange }) => {\r\n  const maxVisiblePages = 5;\r\n  \r\n  const getPageNumbers = () => {\r\n    const pages = [];\r\n    \r\n    if (totalPages <= maxVisiblePages) {\r\n      for (let i = 1; i <= totalPages; i++) {\r\n        pages.push(i);\r\n      }\r\n    } else {\r\n      let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));\r\n      let endPage = startPage + maxVisiblePages - 1;\r\n      \r\n      if (endPage > totalPages) {\r\n        endPage = totalPages;\r\n        startPage = Math.max(1, endPage - maxVisiblePages + 1);\r\n      }\r\n      \r\n      for (let i = startPage; i <= endPage; i++) {\r\n        pages.push(i);\r\n      }\r\n    }\r\n    \r\n    return pages;\r\n  };\r\n\r\n  const pageNumbers = getPageNumbers();\r\n\r\n  if (totalPages <= 1) return null;\r\n\r\n  return (\r\n    <div style={{\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n      gap: \"0.5rem\",\r\n      marginTop: \"2rem\",\r\n      padding: \"1rem\",\r\n      flexWrap: \"wrap\"\r\n    }}>\r\n      <button\r\n        onClick={() => onPageChange(1)}\r\n        disabled={currentPage === 1}\r\n        style={{\r\n          padding: \"0.5rem 1rem\",\r\n          backgroundColor: currentPage === 1 ? \"#e9ecef\" : \"#fff\",\r\n          color: currentPage === 1 ? \"#6c757d\" : \"#2c7be5\",\r\n          border: \"1px solid #dee2e6\",\r\n          borderRadius: \"4px\",\r\n          cursor: currentPage === 1 ? \"not-allowed\" : \"pointer\",\r\n          fontSize: \"0.9rem\"\r\n        }}\r\n      >\r\n        First\r\n      </button>\r\n      \r\n      <button\r\n        onClick={() => onPageChange(currentPage - 1)}\r\n        disabled={currentPage === 1}\r\n        style={{\r\n          padding: \"0.5rem 1rem\",\r\n          backgroundColor: currentPage === 1 ? \"#e9ecef\" : \"#fff\",\r\n          color: currentPage === 1 ? \"#6c757d\" : \"#2c7be5\",\r\n          border: \"1px solid #dee2e6\",\r\n          borderRadius: \"4px\",\r\n          cursor: currentPage === 1 ? \"not-allowed\" : \"pointer\",\r\n          fontSize: \"0.9rem\"\r\n        }}\r\n      >\r\n        Previous\r\n      </button>\r\n      \r\n      {pageNumbers[0] > 1 && (\r\n        <span style={{ color: \"#6c757d\", padding: \"0 0.5rem\" }}>...</span>\r\n      )}\r\n      \r\n      {pageNumbers.map(page => (\r\n        <button\r\n          key={page}\r\n          onClick={() => onPageChange(page)}\r\n          style={{\r\n            padding: \"0.5rem 1rem\",\r\n            backgroundColor: currentPage === page ? \"#2c7be5\" : \"#fff\",\r\n            color: currentPage === page ? \"#fff\" : \"#2c7be5\",\r\n            border: \"1px solid #dee2e6\",\r\n            borderRadius: \"4px\",\r\n            cursor: \"pointer\",\r\n            fontWeight: currentPage === page ? \"bold\" : \"normal\",\r\n            fontSize: \"0.9rem\"\r\n          }}\r\n        >\r\n          {page}\r\n        </button>\r\n      ))}\r\n      \r\n      {pageNumbers[pageNumbers.length - 1] < totalPages && (\r\n        <span style={{ color: \"#6c757d\", padding: \"0 0.5rem\" }}>...</span>\r\n      )}\r\n      \r\n      <button\r\n        onClick={() => onPageChange(currentPage + 1)}\r\n        disabled={currentPage === totalPages}\r\n        style={{\r\n          padding: \"0.5rem 1rem\",\r\n          backgroundColor: currentPage === totalPages ? \"#e9ecef\" : \"#fff\",\r\n          color: currentPage === totalPages ? \"#6c757d\" : \"#2c7be5\",\r\n          border: \"1px solid #dee2e6\",\r\n          borderRadius: \"4px\",\r\n          cursor: currentPage === totalPages ? \"not-allowed\" : \"pointer\",\r\n          fontSize: \"0.9rem\"\r\n        }}\r\n      >\r\n        Next\r\n      </button>\r\n      \r\n      <button\r\n        onClick={() => onPageChange(totalPages)}\r\n        disabled={currentPage === totalPages}\r\n        style={{\r\n          padding: \"0.5rem 1rem\",\r\n          backgroundColor: currentPage === totalPages ? \"#e9ecef\" : \"#fff\",\r\n          color: currentPage === totalPages ? \"#6c757d\" : \"#2c7be5\",\r\n          border: \"1px solid #dee2e6\",\r\n          borderRadius: \"4px\",\r\n          cursor: currentPage === totalPages ? \"not-allowed\" : \"pointer\",\r\n          fontSize: \"0.9rem\"\r\n        }}\r\n      >\r\n        Last\r\n      </button>\r\n      \r\n      <span style={{ marginLeft: \"1rem\", color: \"#6c757d\", fontSize: \"0.9rem\" }}>\r\n        Page {currentPage} of {totalPages}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\n// 页面大小选择器\r\nconst PageSizeSelector = ({ pageSize, onChange }) => {\r\n  const options = [10, 25, 50, 100];\r\n  \r\n  return (\r\n    <div style={{\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      gap: \"0.5rem\",\r\n      marginTop: \"1rem\"\r\n    }}>\r\n      <label style={{ fontSize: \"0.9rem\", color: \"#666\" }}>\r\n        Show:\r\n      </label>\r\n      <select\r\n        value={pageSize}\r\n        onChange={(e) => onChange(Number(e.target.value))}\r\n        style={{\r\n          padding: \"0.4rem 0.6rem\",\r\n          border: \"1px solid #ccc\",\r\n          borderRadius: \"4px\",\r\n          backgroundColor: \"#fff\",\r\n          fontSize: \"0.9rem\"\r\n        }}\r\n      >\r\n        {options.map(option => (\r\n          <option key={option} value={option}>\r\n            {option} per page\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AdminUsersPage = () => {\r\n  const { user: currentUser, loading: authLoading } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n  const [users, setUsers] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [editingUser, setEditingUser] = useState(null);\r\n  const [fetchError, setFetchError] = useState(\"\");\r\n  \r\n  // 分页状态\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(10);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n\r\n  // 检查用户是否已登录且是管理员\r\n    useEffect(() => {\r\n    if (!authLoading && !currentUser) {\r\n        navigate('/login');\r\n        return;\r\n    }\r\n    \r\n    if (!authLoading && currentUser && currentUser.role !== 'admin') {\r\n        navigate('/');\r\n        return;\r\n    }\r\n\r\n    if (currentUser && currentUser.role === 'admin') {\r\n        fetchUsers();\r\n    }\r\n    }, [currentUser, authLoading, navigate]);\r\n\r\n  // 加载用户数据\r\n  const fetchUsers = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setFetchError(\"\");\r\n      \r\n      const res = await fetch(\"/admin/users\", {\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\",\r\n      });\r\n\r\n      if (!res.ok) {\r\n        if (res.status === 401) {\r\n          navigate('/login');\r\n          throw new Error(\"Authentication required. Please log in again.\");\r\n        } else if (res.status === 403) {\r\n          navigate('/');\r\n          throw new Error(\"You don't have permission to access this page.\");\r\n        } else {\r\n          throw new Error(`Failed to fetch users: ${res.status}`);\r\n        }\r\n      }\r\n      \r\n      const data = await res.json();\r\n      setUsers(data);\r\n    } catch (err) {\r\n      console.error(\"Error fetching users:\", err);\r\n      setFetchError(err.message || \"Failed to load users. Please try again later.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (currentUser && currentUser.role === 'admin') {\r\n      fetchUsers();\r\n    }\r\n  }, [currentUser]);\r\n\r\n  // 搜索过滤\r\n  const filteredUsers = useMemo(() => {\r\n    return users.filter((user) =>\r\n      user.username?.toLowerCase().includes(search.toLowerCase()) ||\r\n      user.role?.toLowerCase().includes(search.toLowerCase())\r\n    );\r\n  }, [users, search]);\r\n\r\n  // 计算分页数据\r\n  useEffect(() => {\r\n    const total = Math.ceil(filteredUsers.length / pageSize);\r\n    setTotalPages(total > 0 ? total : 1);\r\n    \r\n    // 如果当前页超过总页数，跳转到第一页\r\n    if (currentPage > total && total > 0) {\r\n      setCurrentPage(1);\r\n    }\r\n  }, [filteredUsers, pageSize, currentPage]);\r\n\r\n  // 获取当前页的数据\r\n  const paginatedUsers = useMemo(() => {\r\n    const startIndex = (currentPage - 1) * pageSize;\r\n    const endIndex = startIndex + pageSize;\r\n    return filteredUsers.slice(startIndex, endIndex);\r\n  }, [filteredUsers, currentPage, pageSize]);\r\n\r\n  // 模态框处理函数\r\n  const handleAddClick = () => {\r\n    setEditingUser(null);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleEditClick = (user) => {\r\n    setEditingUser(user);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleModalSubmit = async (formData) => {\r\n    try {\r\n      let res;\r\n      let method;\r\n      let url;\r\n      \r\n      if (editingUser) {\r\n        // 更新现有用户\r\n        method = \"PUT\";\r\n        url = `/admin/users/${editingUser.username}`;\r\n      } else {\r\n        // 添加新用户\r\n        method = \"POST\";\r\n        url = `/admin/users`;\r\n      }\r\n      \r\n      res = await fetch(url, {\r\n        method,\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\",\r\n        body: JSON.stringify(formData),\r\n      });\r\n      \r\n      const responseData = await res.json();\r\n      \r\n      if (!res.ok) {\r\n        throw new Error(responseData.error || `Failed to ${editingUser ? 'update' : 'add'} user`);\r\n      }\r\n      \r\n      // 重新获取数据以确保与数据库同步\r\n      await fetchUsers();\r\n      \r\n    } catch (err) {\r\n      console.error(\"Error saving user:\", err);\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (username) => {\r\n    // 不能删除当前登录的用户\r\n    if (username === currentUser?.username) {\r\n      alert(\"You cannot delete your own account while logged in.\");\r\n      return;\r\n    }\r\n    \r\n    if (!window.confirm(`Are you sure you want to delete user \"${username}\"? This action cannot be undone.`)) return;\r\n    \r\n    try {\r\n      const res = await fetch(`/admin/users/${username}`, {\r\n        method: \"DELETE\",\r\n        credentials: \"include\",\r\n      });\r\n      \r\n      if (!res.ok) {\r\n        const errorData = await res.json().catch(() => ({}));\r\n        throw new Error(errorData.error || \"Failed to delete user\");\r\n      }\r\n      \r\n      // 重新获取数据以确保与数据库同步\r\n      await fetchUsers();\r\n      \r\n    } catch (err) {\r\n      console.error(\"Error deleting user:\", err);\r\n      alert(`Error deleting user: ${err.message}`);\r\n    }\r\n  };\r\n\r\n  const handleReset2FA = async (username) => {\r\n    if (!window.confirm(`Are you sure you want to reset 2FA for user \"${username}\"?`)) return;\r\n    \r\n    try {\r\n      const res = await fetch(`/admin/users/${username}/reset-2fa`, {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n      });\r\n      \r\n      if (!res.ok) {\r\n        const errorData = await res.json().catch(() => ({}));\r\n        throw new Error(errorData.error || \"Failed to reset 2FA\");\r\n      }\r\n      \r\n      alert(`2FA has been reset for user \"${username}\"`);\r\n      // 可选：重新获取数据以更新显示\r\n      await fetchUsers();\r\n      \r\n    } catch (err) {\r\n      console.error(\"Error resetting 2FA:\", err);\r\n      alert(`Error resetting 2FA: ${err.message}`);\r\n    }\r\n  };\r\n\r\n  // 分页处理函数\r\n  const handlePageChange = (page) => {\r\n    setCurrentPage(page);\r\n    // 滚动到表格顶部\r\n    const tableContainer = document.querySelector('.table-container');\r\n    if (tableContainer) {\r\n      tableContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n    }\r\n  };\r\n\r\n  const handlePageSizeChange = (newSize) => {\r\n    setPageSize(newSize);\r\n    setCurrentPage(1); // 重置到第一页\r\n  };\r\n\r\n  if (authLoading) {\r\n    return (\r\n      <main className=\"locations-page\">\r\n        <h2>Manage Users</h2>\r\n        <div style={{ \r\n          display: \"flex\", \r\n          justifyContent: \"center\", \r\n          alignItems: \"center\", \r\n          height: \"200px\" \r\n        }}>\r\n          <p>Checking authentication...</p>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <main className=\"locations-page\">\r\n        <h2>Manage Users</h2>\r\n        <div style={{ \r\n          display: \"flex\", \r\n          justifyContent: \"center\", \r\n          alignItems: \"center\", \r\n          height: \"200px\" \r\n        }}>\r\n          <p>Loading users from server...</p>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className=\"locations-page\">\r\n      <h2>Manage Users</h2>\r\n\r\n      {fetchError && (\r\n        <div style={{\r\n          padding: \"1rem\",\r\n          marginBottom: \"1rem\",\r\n          backgroundColor: \"#f8d7da\",\r\n          color: \"#721c24\",\r\n          border: \"1px solid #f5c6cb\",\r\n          borderRadius: \"4px\"\r\n        }}>\r\n          <strong>Error:</strong> {fetchError}\r\n          <button \r\n            onClick={fetchUsers}\r\n            style={{\r\n              marginLeft: \"1rem\",\r\n              padding: \"0.25rem 0.75rem\",\r\n              backgroundColor: \"#dc3545\",\r\n              color: \"white\",\r\n              border: \"none\",\r\n              borderRadius: \"4px\",\r\n              cursor: \"pointer\"\r\n            }}\r\n          >\r\n            Retry\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* 搜索和添加区域 */}\r\n      <div className=\"filters\" style={{ justifyContent: \"space-between\", alignItems: \"flex-end\" }}>\r\n        <div className=\"filter-item\" style={{ flex: 1 }}>\r\n          <label htmlFor=\"search\">Search users:</label>\r\n          <input\r\n            id=\"search\"\r\n            type=\"text\"\r\n            placeholder=\"Search by username or role...\"\r\n            value={search}\r\n            onChange={(e) => {\r\n              setSearch(e.target.value);\r\n              setCurrentPage(1); // 搜索时重置到第一页\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <button\r\n          onClick={handleAddClick}\r\n          style={{\r\n            padding: \"0.6rem 1rem\",\r\n            backgroundColor: \"#2c7be5\",\r\n            color: \"white\",\r\n            border: \"none\",\r\n            borderRadius: \"6px\",\r\n            cursor: \"pointer\",\r\n            height: \"fit-content\",\r\n            minHeight: \"38px\"\r\n          }}\r\n        >\r\n          + Add New User\r\n        </button>\r\n      </div>\r\n\r\n      {/* 页面大小选择器 */}\r\n      <PageSizeSelector pageSize={pageSize} onChange={handlePageSizeChange} />\r\n\r\n      {/* 结果统计 */}\r\n      <div style={{\r\n        margin: \"1rem 0\",\r\n        color: \"#666\",\r\n        fontSize: \"0.9rem\",\r\n        textAlign: \"right\"\r\n      }}>\r\n        Showing {((currentPage - 1) * pageSize) + 1} - {\r\n          Math.min(currentPage * pageSize, filteredUsers.length)\r\n        } of {filteredUsers.length} users\r\n      </div>\r\n\r\n      {/* 表格 */}\r\n      <div className=\"table-container\">\r\n        <table className=\"locations-table\" style={{ minWidth: \"800px\" }}>\r\n          <thead>\r\n            <tr>\r\n              <th style={{ width: \"40%\" }}>Username</th>\r\n              <th style={{ width: \"20%\" }}>Role</th>\r\n              <th style={{ width: \"20%\" }}>2FA Status</th>\r\n              <th style={{ width: \"20%\" }}>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {paginatedUsers.length > 0 ? (\r\n              paginatedUsers.map((user) => (\r\n                <tr key={user._id || user.username}>\r\n                  <td>\r\n                    {user.username}\r\n                    {user.username === currentUser?.username && (\r\n                      <span style={{ \r\n                        marginLeft: \"0.5rem\", \r\n                        backgroundColor: \"#2c7be5\", \r\n                        color: \"white\", \r\n                        padding: \"0.1rem 0.4rem\", \r\n                        borderRadius: \"3px\",\r\n                        fontSize: \"0.75rem\"\r\n                      }}>\r\n                        You\r\n                      </span>\r\n                    )}\r\n                  </td>\r\n                  <td>\r\n                    <span style={{\r\n                      backgroundColor: user.role === 'admin' ? \"#dc3545\" : \"#28a745\",\r\n                      color: \"white\",\r\n                      padding: \"0.2rem 0.5rem\",\r\n                      borderRadius: \"4px\",\r\n                      fontSize: \"0.85rem\"\r\n                    }}>\r\n                      {user.role}\r\n                    </span>\r\n                  </td>\r\n                  <td>\r\n                    {user.twoFactorEnabled ? (\r\n                      <span style={{ color: \"#28a745\", fontWeight: \"bold\" }}>Enabled</span>\r\n                    ) : (\r\n                      <span style={{ color: \"#6c757d\" }}>Disabled</span>\r\n                    )}\r\n                  </td>\r\n                  <td>\r\n                    <div style={{ display: \"flex\", gap: \"0.5rem\", flexWrap: \"wrap\" }}>\r\n                      <button\r\n                        style={{\r\n                          backgroundColor: \"#ffc107\",\r\n                          border: \"none\",\r\n                          padding: \"0.4rem 0.7rem\",\r\n                          borderRadius: \"4px\",\r\n                          cursor: \"pointer\",\r\n                          whiteSpace: \"nowrap\"\r\n                        }}\r\n                        onClick={() => handleEditClick(user)}\r\n                      >\r\n                        Edit\r\n                      </button>\r\n                      {user.twoFactorEnabled && user.role !== 'admin' && (\r\n                        <button\r\n                          style={{\r\n                            backgroundColor: \"#17a2b8\",\r\n                            border: \"none\",\r\n                            padding: \"0.4rem 0.7rem\",\r\n                            borderRadius: \"4px\",\r\n                            color: \"white\",\r\n                            cursor: \"pointer\",\r\n                            whiteSpace: \"nowrap\"\r\n                          }}\r\n                          onClick={() => handleReset2FA(user.username)}\r\n                        >\r\n                          Reset 2FA\r\n                        </button>\r\n                      )}\r\n                      <button\r\n                        style={{\r\n                          backgroundColor: \"#dc3545\",\r\n                          border: \"none\",\r\n                          padding: \"0.4rem 0.7rem\",\r\n                          borderRadius: \"4px\",\r\n                          color: \"white\",\r\n                          cursor: user.username === currentUser?.username ? \"not-allowed\" : \"pointer\",\r\n                          whiteSpace: \"nowrap\",\r\n                          opacity: user.username === currentUser?.username ? 0.6 : 1\r\n                        }}\r\n                        onClick={() => handleDelete(user.username)}\r\n                        disabled={user.username === currentUser?.username}\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td colSpan=\"4\" className=\"no-results\">\r\n                  {search ? \"No users match your search\" : \"No users found\"}\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* 分页 */}\r\n      <Pagination\r\n        currentPage={currentPage}\r\n        totalPages={totalPages}\r\n        onPageChange={handlePageChange}\r\n      />\r\n\r\n      {/* 用户模态框 */}\r\n      <UserModal\r\n        isOpen={modalOpen}\r\n        onClose={() => setModalOpen(false)}\r\n        onSubmit={handleModalSubmit}\r\n        user={editingUser}\r\n      />\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default AdminUsersPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}